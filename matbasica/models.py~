# -*- encoding: utf-8 -*-

from django.db import models
from datetime import datetime
import unicodedata

class Usuario(models.Model):
	nome_usuario = models.CharField(max_length=255 , unique=True)
	nome = models.CharField(max_length=255)
	email = models.EmailField(unique=True)
	tipo  = models.BooleanField()
	senha = models.CharField(max_length=255)

	def __unicode__(self):
		return self.nome_usuario

class Conteudo(models.Model):
	tema = models.CharField(max_length=255 , unique=True)
	descricao = models.TextField(null=True , blank=True)
	
	def __unicode__(self):
		return self.tema
		
class Pergunta(models.Model):
	descricao = models.TextField()
	item_correto = models.ForeignKey('Item', null=True , blank=True)
	conteudo_pertence = models.ForeignKey(Conteudo)

	def __unicode__(self):
		return self.descricao

class Item(models.Model):
	descricao = models.TextField()
	pergunta_pertence = models.ForeignKey(Pergunta , related_name='pertence')
	tipo_proximo = models.BooleanField()
	pergunta_proximo = models.ForeignKey(Pergunta ,related_name="proximo" , null=True , blank=True)
	conteudo_proximo = models.ForeignKey(Conteudo , null=True , blank=True)

	def __unicode__(self):
		return self.descricao

class Historico(models.Model):
	usuario = models.ForeignKey(Usuario)
	conteudo = models.ForeignKey(Conteudo)
	pergunta = models.ForeignKey(Pergunta)
	item = models.ForeignKey(Item)
	data = models.DateTimeField(default=datetime.now , blank=True)
	acertou = models.BooleanField()

	def __unicode__(self):
		return str(self.usuario) + " em " + str(self.data)

