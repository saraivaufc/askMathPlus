{% extends 'askmath/manager/lesson/overwrite_header.html' %}
{% load i18n %}

{%  block content_right %}

<div class="cell">
	{% if perms.askmath.write_lesson %}
		<a href="/home/manager/lessons/add/" class="image-button button-success">
			{% trans "Create" %}
			<span class="icon mif-plus"></span>
		</a>
	{% endif %}
	{% if is_removed %}
		<a href="/home/manager/lessons/view/" class="image-button button-info" data-popover="undo">
			{% trans "Undo" %}
			<span class="icon mif-undo"></span>
		</a>
	{% else %}
		<a href="/home/manager/lessons/view_removed/" class="image-button button-warning" data-popover="dump">
			{% trans "Dump" %}
			<span class="icon mif-bin"></span>
		</a>
	{% endif %}
</div>

{% regroup disciplines by title as discipline_list %}
	<div class="accordion">
	{% for discipline in discipline_list %}
		{% if discipline.list %}
		<div class="frame active">
			<div class="heading">{{ discipline.grouper|title }}</div>
			<div class="content">
				<div class="tile-container">
					{% for item in discipline.list %}
						{% for lesson in item.lessons %}
							<div class="tile-wide {{ lesson.color }} {% if lesson.visible %}element-selected{% endif %}  fg-white" data-role="tile">
							    <a href="/home/manager/lessons/view/lesson={{ lesson.id }}/" class="tile-content iconic">
							        <span class="icon mif-clipboard"></span>
							        <span class="tile-label">{{ lesson.get_title }}</span>
							        {% if not lesson.exists %}
							        <span class="tile-badge mif-bin"></span>
							        {% endif %}
							    </a>
							</div>
						{% endfor %}
					{% endfor %}
				</div>
			</div>
		</div>
		{% endif %}
	{% empty %}
		<h3 class="text-center">{% trans "Not Lessons Found" %}</h3>
	{% endfor %}
	</div>
{% endblock %}
