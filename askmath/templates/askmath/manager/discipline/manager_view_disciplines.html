{% extends 'askmath/manager/manager_home.html' %}
{% load i18n %}

{% block breadcrumbs %}
	{{ block.super }}
	<li>
		<a href="{% url 'askmath:manager_discipline_view' %}">
			<span class="icon mif-books"></span> <span>{% trans "Disciplines" %}</span>
		</a>
	</li>
{% endblock %}


{%  block content %}
	<h3 class="text-center page-title">{% trans "Disciplines" %}</h3>
	
	{% if perms.askmath.write_discipline %}
	<div class="cell">
		<a id="button-discipline-create" href="{% url 'askmath:manager_discipline_add' %}" class="image-button success">
			{% trans "Create" %}
			<span class="icon mif-plus"></span>
		</a>
		<a id="button-discipline-edit" href="#" class="image-button primary">
			{% trans "Edit" %}
			<span class="icon mif-pencil"></span>
		</a>
		{% if is_removed %}
		<a id="button-discipline-restore" href="#" class="image-button info">
			{% trans "Restore" %}
			<span class="icon mif-history"></span>
		</a>
		{% else %}
		<a id="button-discipline-delete" href="#" class="image-button danger">
			{% trans "Delete" %}
			<span class="icon mif-minus"></span>
		</a>
		{% endif %}
		{% if is_removed %}
		<a href="{% url 'askmath:manager_discipline_view' %}" class="image-button warning">
			{% trans "Close Dump" %}
			<span class="icon mif-undo"></span>
		</a>
		{% else %}
		<a href="{% url 'askmath:manager_discipline_view_removed' %}" class="image-button warning">
			{% trans "Open Dump" %}
			<span class="icon mif-bin"></span>
		</a>
		{% endif %}
	</div>
	{% endif %}



	<table  class="dataTable border bordered">
		<thead>
			<tr>
				{% if perms.askmath.write_discipline %}
				<td style="width: 10px"></td>
				{% endif %}
				<td>{% trans "Title" %}</td>
				<td style="width: 20px">{% trans "Visible" %}</td>
				<td>{% trans "Options" %}</td>
			</tr>
		</thead>
		<tbody>
		{% for discipline in disciplines %}
		<tr>
			{% if perms.askmath.write_discipline %}
			<td>
				<label class="input-control radio small-check no-margin">
					<input type="radio" discipline_id="{{ discipline.id }}" name="radio_discipline">
					<span class="check"></span>
				</label>
			</td>
			{% endif %}
			<td class="sortable-column">{{ discipline.get_title }}</td>
			<td class="sortable-column">
				{% if discipline.is_visible %}
					<button class="cycle-button mini-button success">
						<span class="mif mif-checkmark"></span>
					</button>
				{% else %}
					<button class="cycle-button mini-button danger">
						<span class="mif mif-cross"></span>
					</button>
				{% endif %}
			</td>
			<td class="sortable-column">
				<a href="{% url 'askmath:manager_lesson_view' id_discipline=discipline.id %}" class="image-button button primary">
					{% trans "Lessons" %}
					<span class="icon bg-darkCobalt">{{ discipline.get_lessons|length }}</span>
				</a>
			</td>
		{% endfor %}
		</tbody>
	</table>
{% endblock %}