{% extends 'askmath/forum/category/view_categories.html' %}
{% load i18n %}
{% load humanize %}

{% block breadcrumbs %}
	{{ block.super }}
	{% if category %}
	<li>
		<a href="{% url 'askmath:forum_topic_view' id_category=category.id %}">
			<span class="icon mif-bubbles"></span> <span>{{ category }}</span>
		</a>
	</li>
	{% endif %}
{% endblock %}

{%  block content %}
	<h3 class="text-center page-title"><span>{{ category }}</h3>

	<div class="cell">
			<a id="button-topic-create" class="image-button success" href="{% url 'askmath:forum_topic_add' id_category=category.id %}">
				{% trans "Post new topic" %}
				<span class="icon mif-plus"></span>
			</a>
			{% if perms.askmath.access_forum_admin %}
				{% if is_removed %}
				<a id="button-topic-restore" class="image-button info" href="#">
					{% trans "Restore" %}
					<span class="icon mif-history"></span>
				</a>
				{% else %}
				<a id="button-topic-delete" class="image-button danger" href="#">
					{% trans "Delete" %}
					<span class="icon mif-minus"></span>
				</a>
				{% endif %}

				{% if is_removed %}
					<a class="image-button warning" href="{% url 'askmath:forum_topic_view' id_category=category.id %}">
						{% trans "Close Dump" %}
						<span class="icon mif-undo"></span>
					</a>
				{% else %}
					<a class="image-button warning" href="{% url 'askmath:forum_topic_view_removed' id_category=category.id %}">
						{% trans "Open Dump" %}
						<span class="icon mif-bin"></span>
					</a>
				{% endif %}
			{% endif %}
	</div>

	<table class="table dataTable border bordered">
		<thead>
			<tr>
				{% if perms.askmath.access_forum_admin %}
				<th style="width: 10px"></th>
				{% endif %}
				<th class="topics">{% trans "Topic" %}</th>
				<th class="replies">{% trans "Replies" %}</th>
				<th class="date">{% trans "Date" %}</th>
			</tr>
		</thead>
		<tbody>
			{% for topic in topics %}
			<tr>
				{% if perms.askmath.access_forum_admin %}
				<td>
					<label class="input-control radio small-check no-margin">
						<input type="radio" category_id="{{ category.id }}" topic_id="{{ topic.id }}" name="radio_topic">
						<span class="check"></span>
					</label>
				</td>
				{% endif %}
				<td class="topic">
					<div class="icon"></div>
						<div class="details">
							<h5 class="title">
								<a href="{% url 'askmath:forum_topic_view' id_category=category.id id_topic=topic.id %}">{{ topic.get_title }}</a> <span>{% trans "by" %} {{ topic.person }}</span>
							</h5>
						</div>
					</div>
				</td>
				<td class="replies">{{ topic.get_comments|length }}</td>
				<td class="date">
					{{ topic.creation|naturaltime }}
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}

{% block stylesheet %}
	{% include 'askmath/latex/support.html' %}
{% endblock %}